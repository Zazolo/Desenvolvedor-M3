"use strict";import Generic from"../core/Generic.js";import ShopCart from"./ShopCart.js";var __last_id,__last_data,__last_size_choosed,list_data=[];function createItemCard(t="",e="",a="",o=0,n=0,i="0"){return`<div class="showcase-item">\n                <img src="${e}">\n                <label>${a}</label>\n                <label>R$ ${o.toFixed(2)}</label>\n                <label>at√© 3x de ${n.toFixed(2)}</label>\n                <button class="buy-black" data-product="${t}" data-size="${i}">Comprar</button>\n            </div>`}function buyCartClick(t,e){let a;list_data.forEach(o=>{o.id==t&&(a=o,console.log("SIZE CHOOSED",e),a.size_choosed=e)}),a&&ShopCart().addItem(a,()=>{updateButtonSituation(t)})}function updateButtonSituation(t){let e,a=document.getElementsByClassName("buy-black");for(let o=0;o<a.length;o++)a[o].dataset.product==t&&(e=a[o]);e&&("Comprar"==e.textContent?(e.textContent="Remover",e.classList.add("clicked")):(e.textContent="Comprar",e.classList.remove("clicked")))}function checkButtonSituation(t=[]){let e=ShopCart().getCartItens();e&&e.length>0&&e.forEach(e=>{for(let a=0;a<t.length;a++)e.id==t[a].dataset.product&&updateButtonSituation(t[a].dataset.product)})}function createHasMoreButtonPage(t){t.innerHTML+='\n        <div class="shopping-showcase-load-more-container">\n            <button class="show-more-blue">Carregar Mais</button>\n        </div>\n    '}var __first_init,__hasMoreExists=!1;export default function ProductsView(){return{create:(t="",e,a,o=!1,n)=>{""!=t?__last_id=t:t=__last_id,null==e?e=__last_data:__last_data=e,null==a?a=__last_size_choosed:__last_size_choosed=a;let i=Generic().exists_id_on_document(t);if(i){i.innerHTML="",list_data=e;for(let t=0;t<e.length;t++)i.innerHTML+=createItemCard(e[t].id,e[t].image,e[t].name,e[t].price,e[t].division_price,a);if(o){console.log("There is more pages!"),createHasMoreButtonPage(i);let t=i.getElementsByClassName("show-more-blue");__first_init=!0;for(let e=0;e<t.length;e++)t[e].addEventListener("click",()=>{n()})}let t=document.getElementsByClassName("buy-black");checkButtonSituation(t);for(let e=0;e<t.length;e++)t[e].addEventListener("click",function(t){buyCartClick(t.target.dataset.product,t.target.dataset.size)})}}}}